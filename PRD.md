# VocaLevel — Product Requirements Document (PRD)

> **語彙レベルチェッカー / 어휘 레벨 분석기**
> 버전: 1.0.0 | 작성일: 2026-02-28

---

## 1. 제품 개요 (Product Overview)

**VocaLevel**은 일본어 또는 한국어 텍스트를 입력하면 형태소 분석을 통해 각 어휘의 레벨을 시각적으로 표시하는 어휘 레벨 분석기입니다.
일본어는 **JLPT(N5–N1)**, 한국어는 **TOPIK(1–6급)** 어휘 기준으로 색상 코딩하여 직관적으로 텍스트 난이도를 파악할 수 있습니다.

---

## 2. 배경 및 목적 (Background & Purpose)

| 항목 | 내용 |
|------|------|
| 배경 | 일본어·한국어 학습자 및 교사가 텍스트 난이도를 빠르게 파악할 수단이 부족함 |
| 목적 | 형태소 단위로 어휘를 분해하고 레벨을 시각화하여 학습 효율 향상 |
| 기대 효과 | 교재 제작 시 어휘 레벨 검토, 학습자의 자기 진단, 교사의 수업 자료 분석 |

---

## 3. 대상 사용자 (Target Users)

| 사용자 유형 | 주요 니즈 |
|-------------|-----------|
| 일본어·한국어 학습자 | 텍스트의 어휘 난이도 파악, 모르는 단어 레벨 확인 |
| 언어 교사 | 교재·시험 문제의 어휘 수준 검토 |
| 교재 제작자 | 목표 레벨에 맞는 어휘 구성 확인 |
| 번역가 | 원문과 번역문의 어휘 난이도 비교 |

---

## 4. 핵심 기능 명세 (Core Features)

### 4.1 언어 자동 감지
- 입력 텍스트에서 히라가나/가타카나 비율로 일본어 감지
- 한글 Unicode 범위로 한국어 감지
- 감지 불명확 시 사용자 수동 선택 가능

### 4.2 형태소 분석 (Morphological Analysis)
| 항목 | 일본어 | 한국어 |
|------|--------|--------|
| 엔진 | Python MeCab | Python MeCab |
| 사전 | unidic-cwj-202302 | handic |
| 출력 정보 | 표층형, 읽기(읽기가나), 기본형, 품사 | 표층형, 기본형, 품사 |

### 4.3 레벨 매핑 (Level Mapping)
**일본어 — JLPT**
| 레벨 | 색상 | 설명 |
|------|------|------|
| N5 | 🟢 초록 | 입문 (약 800어) |
| N4 | 🟡 연두 | 기초 (약 1,500어) |
| N3 | 🟠 주황 | 중급 (약 3,750어) |
| N2 | 🔴 빨강 | 중상급 (약 6,000어) |
| N1 | 🔴 진빨강 | 고급 (약 10,000어) |
| 助詞/助動詞 | ⚫ 회색 | 문법 기능어 |
| 미등재 | 🔘 연회색 | JLPT 목록 외 |

**한국어 — TOPIK**
| 레벨 | 색상 | 설명 |
|------|------|------|
| 1급 | 🟢 초록 | 입문 (약 735어) |
| 2급 | 🟡 연두 | 기초 (약 1,100어) |
| 3급 | 🟠 주황 | 초중급 (약 1,656어) |
| 4급 | 🔴 빨강 | 중급 (약 2,200어) |
| 5급 | 🔴 진빨강 | 중고급 (약 2,365어) |
| 6급 | 🟣 보라 | 고급 (약 2,580어) |
| 조사/어미 | ⚫ 회색 | 문법 기능어 |
| 미등재 | 🔘 연회색 | TOPIK 목록 외 |

### 4.4 분석 결과 표시
- **문장 보기**: 인라인 토큰 칩 형태로 색상 표시, 마우스 오버 시 상세 정보 툴팁
- **표 보기**: 번호 / 어휘 / 읽기 / 품사 / 레벨 형태의 테이블
- **레벨 분포**: 색상 막대 + 통계 칩(각 레벨별 어휘 수)
- **종합 지표**: 전체 토큰 수, 내용어 수, 최고 레벨, 예상 전체 난이도

### 4.5 기타 기능
- 다크 모드 토글
- 텍스트 복사 버튼
- CSV/JSON 내보내기 (분석 결과)
- 샘플 텍스트 버튼 (JP/KR 예시 문장)

---

## 5. 기술 스택 (Technical Stack)

```
┌─────────────────────────────────────────────────────────┐
│                      VocaLevel                          │
├─────────────────┬───────────────────────────────────────┤
│   Frontend      │  HTML5 + CSS3 + Vanilla JavaScript    │
│   Backend       │  Python 3.10+ / Flask 3.x             │
│   형태소 분석    │  python-mecab-ko / MeCab Python       │
│   JP 사전        │  unidic-cwj-202302                    │
│   KR 사전        │  handic                               │
│   JP 어휘 DB     │  JLPT vocab CSV (N1–N5)               │
│   KR 어휘 DB     │  TOPIK vocab CSV (1–6급, 10,636어)    │
│   Desktop 래퍼   │  웹브라우저 자동 실행 (webbrowser 모듈) │
│   데스크톱 패키징 │  PyInstaller (macOS .app / Win .exe)  │
└─────────────────┴───────────────────────────────────────┘
```

---

## 6. 프로젝트 구조 (Project Structure)

```
VocaLevel/
├── PRD.md
├── README.md
├── requirements.txt
├── src/
│   ├── backend/
│   │   ├── app.py               # Flask 메인 앱 & API 엔드포인트
│   │   ├── config.py            # 설정 (포트, 경로 등)
│   │   └── analyzer/
│   │       ├── __init__.py
│   │       ├── detector.py      # 언어 자동 감지
│   │       ├── japanese.py      # MeCab + unidic-cwj-202302
│   │       └── korean.py        # MeCab + handic
│   ├── data/
│   │   ├── jlpt_vocab.csv       # JLPT N1–N5 어휘 목록
│   │   └── topik_vocab_all_levels.csv   # TOPIK 1–6급 (10,636어)
│   └── frontend/
│       ├── index.html           # 메인 화면 (SPA)
│       ├── styles.css           # 스타일시트
│       └── app.js               # 프론트엔드 로직
├── desktop/
│   └── launcher.py              # 데스크톱 런처 (Flask 서버 시작 + 브라우저 오픈)
└── build/
    ├── build_mac.sh             # macOS 빌드 스크립트 (PyInstaller)
    └── build_win.bat            # Windows 빌드 스크립트 (PyInstaller)
```

---

## 7. API 설계 (API Design)

### POST `/api/analyze`
**Request:**
```json
{
  "text": "私は毎日東京の大学で日本語を勉強しています。",
  "lang": "auto"   // "auto" | "ja" | "ko"
}
```

**Response:**
```json
{
  "detected_lang": "ja",
  "tokens": [
    {
      "surface": "私",
      "reading": "わたし",
      "base_form": "私",
      "pos": "代名詞",
      "level": "N5",
      "in_list": true
    },
    ...
  ],
  "stats": {
    "total": 15,
    "content_words": 7,
    "by_level": {"N5": 7, "N4": 2, "助詞": 5, "記号": 1},
    "max_level": "N4",
    "estimated_difficulty": "N4"
  }
}
```

### GET `/api/health`
헬스 체크 엔드포인트

---

## 8. 화면 구성 (Screen Layout)

```
┌────────────────────────────────────────────────────────────┐
│ 📚 VocaLevel  語彙レベルチェッカー / 어휘 레벨 분석기    🌙 │
├────────────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────────────┐   │
│ │ [🤖 자동감지]  [🇯🇵 日本語]  [🇰🇷 한국어]             │   │
│ │                                                       │   │
│ │  텍스트를 입력하세요...                                │   │
│ │                                                       │   │
│ │                             22자  [🔍 분석하기]       │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ 📊 분석 결과       [문장 보기] [표 보기]              │   │
│ │ 🇯🇵 日本語 감지됨 | JLPT 기준                         │   │
│ │                                                       │   │
│ │  [私]  [は]  [毎日] [東京]  [の] [大学] [で] ...     │   │
│ │   N5  助詞   N5    N4    助詞   N4   助詞             │   │
│ │                                                       │   │
│ │ ── 레벨 분포 ─────────────────────────────────────── │   │
│ │ ■N5 7개  ■N4 2개  ■助詞 5개                          │   │
│ │ ████████████████████▓▓▓▓▓▓░░░░░░░░░                 │   │
│ └──────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────┘
```

---

## 9. 배포 계획 (Deployment Plan)

### 웹 버전 (Web)
| 항목 | 내용 |
|------|------|
| 서버 | Flask dev server (개발) / Gunicorn + Nginx (프로덕션) |
| 포트 | 기본 5000 (변경 가능) |
| 접속 | `http://localhost:5000` |

### 데스크톱 버전 (Desktop)
| 항목 | macOS | Windows |
|------|-------|---------|
| 패키징 | PyInstaller → `.app` (arm64/x86_64) | PyInstaller → `.exe` |
| 실행 방식 | 앱 더블클릭 → Flask 서버 시작 → 기본 브라우저 자동 오픈 |
| 배포 | DMG 인스톨러 | NSIS 인스톨러 |

---

## 10. 마일스톤 (Milestones)

| 단계 | 내용 | 기간 |
|------|------|------|
| **Phase 1** | 프로젝트 셋업, 데이터 준비 (JLPT CSV), 기본 Flask API | 1주 |
| **Phase 2** | MeCab 일본어 분석기 (unidic-cwj-202302) 구현 | 1주 |
| **Phase 3** | MeCab 한국어 분석기 (handic) 구현 | 1주 |
| **Phase 4** | 프론트엔드 UI 구현 (문장/표 보기, 다크모드) | 1주 |
| **Phase 5** | 데스크톱 패키징 (macOS / Windows) | 1주 |
| **Phase 6** | 테스트 & 버그 수정, 배포 | 1주 |

---

## 11. 제약 사항 및 리스크 (Constraints & Risks)

| 항목 | 내용 | 대응 방안 |
|------|------|-----------|
| MeCab 설치 의존성 | OS별 MeCab 설치 방법이 다름 | PyInstaller 빌드에 바이너리 포함 |
| JLPT 어휘 데이터 | 공식 JLPT 어휘 목록이 공개되지 않음 | 공개된 JLPT 어휘 데이터셋 활용 |
| 한자 동형이의어 | 같은 표기, 다른 레벨 어휘 존재 | 품사 정보로 disambiguation |
| 긴 텍스트 처리 | 매우 긴 텍스트 분석 시 응답 지연 | 청크 처리 + 로딩 인디케이터 |

---

*VocaLevel PRD v1.0 — 2026-02-28*
